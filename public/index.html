<!DOCTYPE html>
<html>

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="CSS/stylesheet.css">
</head>

<body onclick="selectActive()">
    
    <!-- /// Ny pass eller brukernavn -->
    <div id="userSettingsForm" class="modal">
        <div class="modal-content animate">
            <div class="imgcontainer">
                <span onclick="document.getElementById('userSettingsForm').style.display='none'" class="close" title="Close Modal">&times;</span>
                <h2 class="modulHeader">Administrate User</h2>
            </div>

            <div class="container">
                <label for="newUsername">New Username</label>
                <br>
                <input type="text" id="newUsername" placeholder="New username" name="newUsername">
                <button class="formButtons" onclick="changeUsername()">Change username</button>
                <br>
                <label for="newEmail"><b>New Email</b></label>
                <br>
                <input type="text" id="newEmail" placeholder="New email" name="newEmail">
                <button class="formButtons" onclick="changeEmail()">Change email</button>
                <br>
                <label for="newPassword"><b>New Password</b></label>
                <br>
                <input type="password" id="newPassword" placeholder="New password" name="newPassword">
                <button class="formButtons" onclick="changePassword()">Change password</button>
                <br>
                <div id="userSettingsOutput"></div>
                <button class="formButtons" style="background-color: red" onclick="deleteUser()">Delete account</button>
            </div>
        </div>
    </div>



    <div id="logInForm" class="modal">
        <div class="modal-content">
            <div class="imgcontainer">
                <span onclick="document.getElementById('logInForm').style.display='none'" class="close" title="Close Modal">&times;</span>
                <h2 class="modulHeader">Login</h2>
            </div>

            <div class="container">
                <label for="username"><b>Username or email</b></label>
                <br>
                <input type="text" id="loggInnUsername" placeholder="username" name="username">
                <br>
                <label for="password"><b>Password</b></label>
                <br>
                <input type="password" id="loggInnpassword" placeholder="password" name="password">
                <br>
                <p id="outputLogIn"></p>
                <br>
                <button class="formButtons" onclick="loggInn()">Logg inn</button>

            </div>
        </div>
    </div>

    <div id="signUpForm" class="modal">
        <div class="modal-content">
            <div class="imgcontainer">
                <span onclick="document.getElementById('signUpForm').style.display='none'" class="close" title="Close Modal">&times;</span>
                <h2 class="modulHeader">Sign up</h2>
            </div>

            <div class="container">
                <label for="email"><b>Email</b></label>
                <br>
                <input type="text" id="regEmail" placeholder="Email" name="email">
                <br>
                <label for="username"><b>Username</b></label>
                <br>
                <input type="text" id="regUsername" placeholder="username" name="username">
                <br>
                <label for="password"><b>Password</b></label>
                <br>
                <input type="password" id="regpassword" placeholder="password" name="password">
                <br>
                <h3 id="outputSignUp"></h3>
                <br>
                <button class="formButtons" onclick="register()">Sign up</button>

            </div>
        </div>
    </div>
    <div id="openPres" class="modal">
        <div class="modal-content">
            <div class="imgcontainer">
                <span onclick="document.getElementById('openPres').style.display='none'" class="close" title="Close Modal">&times;</span>
                <h2 class="modulHeader">Open presentation</h2>
            </div>
            <div id="loadedPresentation" class="container"></div>
        </div>
    </div>
    <div id="addImageUrl" class="modal">
        <div class="modal-content">
            <div class="imgcontainer">
                <span onclick="document.getElementById('addImageUrl').style.display='none'" class="close" title="Close Modal">&times;</span>
                <h2 class="modulHeader">Enter URL:</h2>
            </div>
            <div class="container">
                <label for="imgUrl">Image URL:</label>
                <input id="imgUrl" placeholder="image url...">
                <br>
                <br>
                <button onclick="updateSlide()">Add</button>
            </div>
        </div>
    </div>
    
 

    <div id="header"></div>

    <template id="signedIn">
        <div class="dropdown">
            <button class="dropbtn">Fil</button>
            <div class="dropdown-content">
                <a onclick="savePresentation()">Save</a>
                <a onclick=" document.getElementById('openPres').style.display = 'block'">Open</a>
            </div>
        </div>
        <input id="presentationTitle" placeholder="Presentation Title..">
        <h3 id="user"></h3>
        <button class="formButtons" onclick="logOut()">Log out</button>
    </template>

    <template id="notSignedIn">
        <button id="loginBtn" onclick="document.getElementById('signUpForm').style.display='block'" style="width:auto;">Sign up</button>
        <button id="signInBtn" onclick="document.getElementById('logInForm').style.display='block'" style="width:auto;">Login</button>
    </template>


    <div class="menu">
        <div id="textMenu">
            <h3>Text editing</h3>
            <button id="butB" onclick="toBold()">B</button>
            <button id="butI" onclick="toItalic()">I</button>
            <button id="butAa" onclick="toSmallCaps()">Aa</button>


            <p>Select font</p>
            <select onchange="changeFont(this);" id="fontList">
                <option selected>Arial</option>
                <option>Georgia</option>
                <option>Palatino Linotype</option>
                <option>Book Antiqua</option>
                <option>Times New Roman</option>
                <option>Helvetica</option>
                <option>Arial Black</option>
                <option>Impact</option>
                <option>Lucida Sans Unicode</option>
                <option>Tahoma</option>
                <option>Verdana</option>
                <option>Courier New</option>
                <option>Lucida Console</option>
            </select>


        </div>
        <div id="imageMenu">
            <h3>Image Editing</h3>
            <!--//Legg til et bilde-->
            <button id="addImg" onclick="document.getElementById('addImageUrl').style.display='block'" >Add image</button>
            <br>
            <!--//Skalering-->
            <p>Scale image</p>
            <input id="imgSlider" type="range" min="10" max="1000" step="1">
            <br>

            <!--//Div som bilder blir lagt inn i-->
            <!-- <div id="presObj" style=" border-style: solid;"></div> -->
            <p>Select filter</p>
            <!--//Sette inn filter-->
            <select id="filter">
                <option value="none">None</option>
                <option value="blur(5px)">Blur</option>
                <option value="brightness(200%)">Brightness</option>
                <option value="contrast(200%)">Contrast</option>
                <option value="drop-shadow(8px 8px 10px gray)">Drop-Shadow</option>
                <option value="grayscale(100%)">Grayscale</option>
                <option value="hue-rotate(90deg)">Hue-rotate</option>
                <option value="invert(100%)">Invert</option>
                <option value="opacity(30%)">Opacity</option>
                <option value="saturate(8)">Saturate</option>
                <option value="sepia(100%)">Sepia</option>
            </select>
        </div>
        
        <div id="backgroundMenu">
            <h3>Background</h3>
            <label for="pickcolor">Color</label>
            <input type="color" id="pickcolor" value="#fdffff" onchange="updateSlide();" />
        </div>
           <div id="templatesMenu">
            <label for="templates">Templates</label>
            <select id="templates" onchange="changeTemplate(parseInt(this.value))">
                <option value="0">Title</option>
                <option value="1">Default</option>
                <option value="2">Media</option>
            </select>
        </div>
        <div id="notesAndFullscreen">
        <button id="fullscreenBtn">FullScreen</button>
        <br>
        <button id="toggleNotes" onclick="toggleNotes(event)">Toggle notes</button>
        </div>



    </div>
    
    <div id="canvas"></div>
     
    <a class="prev" onclick="plusSlides(-1)" style="z-index: 2">&#10094;</a>
    <a class="next" onclick="plusSlides(1)" style="z-index: 2">&#10095;</a>
    <div class="footer" id="footer">
        <div id="preview"></div>
        <div id="addNewSlide" style="z-index: 0"></div>
    </div>

    <div id="slideNotes" class="footer" style="z-index: -1">
        <textarea title="notes" id="notes" style="width: 100%; height: 100%" onchange="saveNotes()"></textarea>
    </div>

    <script>






        let loggInnUsername = document.getElementById("loggInnUsername");
        let loggInnpassword = document.getElementById("loggInnpassword");

        let regUsername = document.getElementById("regUsername");
        let regPassword = document.getElementById("regpassword");
        let regEmail = document.getElementById("regEmail");

        let loginBtn = document.getElementById("loginBtn");
        let signInBtn = document.getElementById("signInBtn");

        let outputLogIn1 = document.getElementById("outputLogIn");
        let outputSignUp1 = document.getElementById("outputSignUp");

        //Change header template
        let header = document.getElementById("header");
        //username shown




        window.onload = function() {
            localStorage.removeItem('presentationid');
            if (localStorage.logindata == null) {
                setHeaderView("notSignedIn", header);
            } else {

                setHeaderView("signedIn", header);
                let user = document.getElementById("user");
                let username = JSON.parse(localStorage.getItem("logindata")).username;
                user.innerHTML = username;
                user.onclick = function changePassword() {
                    document.getElementById('userSettingsForm').style.display = 'block'
                };
            }

        }



        function setHeaderView(id) {
            header.innerHTML = "";
            let temp = document.getElementById(id);
            let clone = temp.content.cloneNode(true);
            header.appendChild(clone);

        }

        // Get the modal
        let logInForm = document.getElementById('logInForm');
        let signUpForm = document.getElementById('signUpForm');
        let openPres = document.getElementById('openPres');
        let addImgUrl = document.getElementById('addImageUrl');

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == logInForm) {
                logInForm.style.display = "none";
            }
            if (event.target == signUpForm) {
                signUpForm.style.display = "none";
            }
            if (event.target == openPres) {
                openPres.style.display = "none";
            }
            if (event.target == addImgUrl) {
                addImgUrl.style.display = "none";
            }
        }
    </script>
    <script src="js/editingTools.js"></script>
    <script src="js/javascript.js"></script>
    <script src="js/slidesRewamp.js"></script>



</body>

</html>